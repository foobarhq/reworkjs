{"version":3,"sources":["webpack:///../START.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---start-md-225821ce89a4cd9dcdd1.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/ephys/Documents/dev/reworkjs/reworkjs/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"rjs-start\"\n    }}>{`rjs start`}</h1>\n    <p>{`prod could simply delegate: a call to `}<inlineCode parentName=\"p\">{`rjs build`}</inlineCode>{` then call to `}<inlineCode parentName=\"p\">{`rjs serve`}</inlineCode></p>\n    <p>{`dev must go through `}<inlineCode parentName=\"p\">{`webpackDevMiddleware`}</inlineCode>{` (server & client)`}</p>\n    <h2 {...{\n      \"id\": \"prod--ssr\"\n    }}>{`prod + ssr`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`build client bundle + server bundle ONCE (call to `}<inlineCode parentName=\"li\">{`NODE_ENV=production rjs build client server`}</inlineCode>{`?)`}</li>\n      <li parentName=\"ul\">{`start SSR server (server bundle) (call to `}<inlineCode parentName=\"li\">{`rjs serve --ssr`}</inlineCode>{`?)\n-- serves static files\n-- serves live routes if no static file found`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"prod-no-ssr\"\n    }}>{`prod NO SSR`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`build client bundle ONCE (call to `}<inlineCode parentName=\"li\">{`NODE_ENV=production rjs build client`}</inlineCode>{`?)`}</li>\n      <li parentName=\"ul\">{`start static file server (call to `}<inlineCode parentName=\"li\">{`rjs serve --no-ssr`}</inlineCode>{`?)\n-- serves static files\n-- serves index.html if no static file found`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"dev--ssr\"\n    }}>{`dev + ssr`}</h2>\n    <p>{`the special one: two servers (dev front, dev back)`}</p>\n    <ul>\n      <li parentName=\"ul\">{`get compile client & server with watch compilers`}</li>\n      <li parentName=\"ul\">{`launch client\n-- launch webpackDevMiddleware & pass client compiler\n-- launch proxy to SSR server`}</li>\n      <li parentName=\"ul\">{`launch SSR (bundle output, other process)\n-- wait for watch compiler to finish & start it\n-- restart it on hot reload`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"dev-no-ssr\"\n    }}>{`dev NO ssr`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`compile client & server with watch (retrieve webpack compilers)`}</li>\n      <li parentName=\"ul\">{`launch client\n-- launch webpackDevMiddleware & pass client webpack compiler\n-- serves index.html if no static file found`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"organisation\"\n    }}>{`Organisation`}</h3>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`framework/client`}</inlineCode>{`:`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Client Bundle Entry Point (React.render)`}</li>\n          <li parentName=\"ul\">{`calls pre-init, React.render`}</li>\n        </ul></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`framework/server`}</inlineCode>{`:`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`[PROD SSR]`}{` Server Bundle Entry Point (express app)`}</li>\n          <li parentName=\"ul\">{`calls pre-init, server-hooks, serveReactRoute`}</li>\n        </ul></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`internals/server`}</inlineCode>{`:`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`[PROD NO SSR]`}{` `}<inlineCode parentName=\"li\">{`serve-no-ssr.js`}</inlineCode><ul parentName=\"li\">\n              <li parentName=\"ul\">{`Fully static server (serves static files + fallback index.html)`}</li>\n            </ul></li>\n          <li parentName=\"ul\">{`[DEV NO SSR]`}{` `}<inlineCode parentName=\"li\">{`start-no-ssr.js`}</inlineCode><ul parentName=\"li\">\n              <li parentName=\"ul\">{`calls `}<inlineCode parentName=\"li\">{`build client`}</inlineCode>{` API`}</li>\n              <li parentName=\"ul\">{`Starts Client server (once, webpackDevMiddleware)`}</li>\n              <li parentName=\"ul\">{`fallback to index.html`}</li>\n            </ul></li>\n          <li parentName=\"ul\">{`[DEV SSR]`}{` `}<inlineCode parentName=\"li\">{`start-ssr.js`}</inlineCode><ul parentName=\"li\">\n              <li parentName=\"ul\">{`calls `}<inlineCode parentName=\"li\">{`build client server --watch`}</inlineCode>{` API (or `}<inlineCode parentName=\"li\">{`build(client, server, watch: true)`}</inlineCode>{`)`}</li>\n              <li parentName=\"ul\">{`Starts Client server (once, webpackDevMiddleware)`}</li>\n              <li parentName=\"ul\">{`Starts and hot reloads SSR server (sub-process, needs to be killable)`}</li>\n            </ul></li>\n        </ul></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"parallelism\"\n    }}>{`Parallelism`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`parallel-webpack (each build in parallel - client/server) OR each compiler on their own process`}</li>\n      <li parentName=\"ul\">{`thread-loader (parallel loaders, eg babel)?`}</li>\n      <li parentName=\"ul\">{`dev only: SSR always on its own process, client on main process is fine.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"reporting\"\n    }}>{`Reporting`}</h3>\n    <p>{`for split view (start command only):`}</p>\n    <ul>\n      <li parentName=\"ul\">{`limit split view to `}{`[client + builders]`}{` & `}{`[server]`}</li>\n      <li parentName=\"ul\">{`add progress bar`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"unification\"\n    }}>{`Unification`}</h3>\n    <p>{`Building must be an internal api which looks like this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`function build(\n  sides: {\n    client: boolean,\n    server: boolean,\n  }, \n  opts: {\n    watch: boolean,\n    mode: 'PRODUCTION' | 'DEVELOPMENT',\n  },\n): { // out\n  client: { compiler: WebpackCompiler },\n  server: { compiler: WebpackCompiler },\n} {}\n`}</code></pre>\n    <h1 {...{\n      \"id\": \"rjs-build\"\n    }}>{`rjs build`}</h1>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`rjs build client server --watch`}</inlineCode>{` calls `}<inlineCode parentName=\"li\">{`build`}</inlineCode>{` function with watch + mode & enables IPC`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`rjs build client server`}</inlineCode>{` calls `}<inlineCode parentName=\"li\">{`build`}</inlineCode>{` function with mode & exits with status code`}</li>\n    </ul>\n    <h1 {...{\n      \"id\": \"rjs-serve\"\n    }}>{`rjs serve`}</h1>\n    <p><em parentName=\"p\">{`PROD ONLY`}</em></p>\n    <p>{`WITH SSR: launches `}<inlineCode parentName=\"p\">{`.build/server/main.js`}</inlineCode>{`\nWITHOUT SSR: launches `}<inlineCode parentName=\"p\">{`internals/server/serve-no-ssr.js`}</inlineCode></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}